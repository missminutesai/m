import{a as s,b as e,d as a,r,j as t,F as o,B as i,o as m}from"./index-7d3c5360.js";import{L as c}from"./LoginIllustration-f4b742e5.js";import{r as l,b as n}from"./app-ea018bf7.js";import{G as d}from"./page_view-348b9fb3.js";import{u as p}from"./useSearchParam-4d3edce1.js";import{u as x}from"./useMount-af975098.js";import"./Loader2-83b2d0d5.js";import"./modal.constants-a59b5e96.js";import"./moment-e0d604bc.js";import"./useEffectOnce-da43a44e.js";const j=()=>{const j=s(),{locale:u}=e(),{user:f}=a(),[h,g]=r.useState(!1),w=p("redirect"),N=p("from"),b=p("code"),k=w||N||`/${u}`;return x((()=>{if(f?.id)return j({pathname:k,search:""});b&&(g(!0),window.postMessage({code:b,type:"user-oauth"},"*"))})),l((()=>{if(f?.id){if(-1!=k.indexOf("//"))return j({pathname:"/",search:""});j({pathname:k,search:""})}}),[f]),t.jsx(d,{children:t.jsxs("div",{className:"min-h-screen bg-dark-700",children:[t.jsx(n,{}),t.jsxs("div",{className:"w-full mx-auto max-w-[560px] grid grid-cols-1 gap-5 text-center mt-20",children:[t.jsx("img",{src:c,alt:"Connect yourself in MEE6",className:"w-full"}),t.jsx("p",{className:"text-dark-100 text-h4 font-bold",children:t.jsx(o,{id:"welcome.title"})}),t.jsx("p",{className:"text-dark-300 text-base",children:t.jsx(o,{id:"welcome.pleaseLogin"})}),t.jsx(i,{className:"mx-auto mt-4",size:"large",loading:h,onClick:()=>m(k),children:t.jsx(o,{id:"welcome.loginWithDiscord"})})]})]})})};export{j as default};
